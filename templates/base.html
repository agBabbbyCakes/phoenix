<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}BotScope{% endblock %}</title>
    <meta name="description"
      content="Realtime Ethereum bot monitoring dashboard with SSE, HTMX, and Chart.js." />
    <meta property="og:title"
      content="BotScope - Realtime Bot Monitoring" />
    <meta property="og:description"
      content="Live charts, alerts, and reports for Ethereum bots. Demo-ready in sample mode." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/static/og-image.png" />
    <meta property="og:url"
      content="{{ request.url if request else '' }}" />
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css"
      rel="stylesheet" />
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/sse.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- Chart.js zoom/pan plugin -->
    <script
      src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.umd.min.js"></script>
    <!-- Chart.js matrix plugin for heatmaps -->
    <script
      src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@2.0.0/dist/chartjs-chart-matrix.min.js"></script>
    <!-- Three.js for 3D Graph Visualization -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="/static/js/graph3d.js"></script>
    <style>
        /* Modern macOS Dashboard Theme */
        :root {
          --bg-primary: #f5f5f7;
          --bg-secondary: #ffffff;
          --text-primary: #1d1d1f;
          --text-secondary: #6e6e73;
          --border-color: #d2d2d7;
          --accent-blue: #007aff;
          --accent-green: #30d158;
          --accent-red: #ff3b30;
          --shadow-sm: 0 1px 3px rgba(0,0,0,0.05);
          --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
          --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
        }
        
        * {
          box-sizing: border-box;
        }
        
        html {
          font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'SF Pro Display', system-ui, sans-serif;
        }
        
        body {
          background: var(--bg-primary);
          color: var(--text-primary);
          margin: 0;
          padding: 0;
        }
        
        /* Dashboard Container - Fixed Frame */
        .dashboard-container {
          width: 100vw;
          height: 100vh;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          background: linear-gradient(to bottom, #f5f5f7, #fafafa);
        }
        
        /* Dashboard Header - Fixed Top */
        .dashboard-header {
          background: rgba(255, 255, 255, 0.8);
          backdrop-filter: saturate(180%) blur(20px);
          -webkit-backdrop-filter: saturate(180%) blur(20px);
          border-bottom: 1px solid var(--border-color);
          padding: 12px 24px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          z-index: 100;
          position: relative;
          box-shadow: var(--shadow-sm);
        }
        
        .header-left {
          display: flex;
          align-items: center;
          gap: 12px;
        }
        
        .app-title {
          font-size: 20px;
          font-weight: 600;
          margin: 0;
          color: var(--text-primary);
        }
        
        .status-badge {
          display: flex;
          align-items: center;
          gap: 6px;
          padding: 4px 12px;
          background: var(--bg-secondary);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          font-size: 12px;
          color: var(--text-secondary);
          font-weight: 500;
        }
        
        .status-dot {
          width: 6px;
          height: 6px;
          border-radius: 50%;
          background: var(--accent-red);
          transition: background 0.3s;
        }
        
        .status-dot.connected {
          background: var(--accent-green);
        }
        
        .header-right {
          display: flex;
          align-items: center;
          gap: 8px;
        }
        
        .btn-icon {
          width: 32px;
          height: 32px;
          border-radius: 8px;
          border: 1px solid var(--border-color);
          background: var(--bg-secondary);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          transition: all 0.2s;
          color: var(--text-primary);
        }
        
        .btn-icon:hover {
          background: var(--accent-blue);
          border-color: var(--accent-blue);
          color: white;
          transform: scale(1.05);
        }
        
        /* Dashboard Content - Scrollable */
        .dashboard-content {
          flex: 1;
          overflow-y: auto;
          overflow-x: hidden;
          padding: 20px;
          margin-top: 50vh; /* Max height constraint for desktop */
          max-width: 100%;
        }
        
        @media (min-width: 1024px) {
          .dashboard-content {
            margin-top: 0;
            max-height: 50vh;
          }
        }
        
        /* Bot Grid Cards */
        .bot-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
          gap: 16px;
          padding: 0;
        }
        
        .bot-card {
          background: var(--bg-secondary);
          border: 1px solid var(--border-color);
          border-radius: 16px;
          padding: 20px;
          transition: all 0.2s;
          box-shadow: var(--shadow-sm);
        }
        
        .bot-card:hover {
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
          border-color: var(--accent-blue);
        }
        
        .bot-card-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }
        
        .bot-name {
          font-size: 16px;
          font-weight: 600;
          margin: 0;
        }
        
        .bot-type {
          font-size: 11px;
          padding: 4px 8px;
          background: var(--bg-primary);
          border-radius: 6px;
          color: var(--text-secondary);
          font-weight: 500;
        }
        
        .bot-metrics {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 12px;
          margin: 16px 0;
        }
        
        .metric-item {
          display: flex;
          flex-direction: column;
          gap: 4px;
        }
        
        .metric-label {
          font-size: 11px;
          color: var(--text-secondary);
          font-weight: 500;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }
        
        .metric-value {
          font-size: 24px;
          font-weight: 600;
          color: var(--text-primary);
        }
        
        /* Modal Styles */
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          backdrop-filter: blur(8px);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
        }
        
        .modal-overlay.hidden {
          display: none;
        }
        
        .modal-container {
          background: var(--bg-secondary);
          border-radius: 20px;
          width: 90%;
          max-width: 480px;
          box-shadow: var(--shadow-lg);
        }
        
        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 20px 24px;
          border-bottom: 1px solid var(--border-color);
        }
        
        .modal-header h2 {
          margin: 0;
          font-size: 20px;
          font-weight: 600;
        }
        
        .btn-close {
          width: 32px;
          height: 32px;
          border: none;
          background: transparent;
          font-size: 24px;
          cursor: pointer;
          color: var(--text-secondary);
          transition: color 0.2s;
        }
        
        .btn-close:hover {
          color: var(--text-primary);
        }
        
        .modal-body {
          padding: 24px;
        }
        
        .form-group {
          margin-bottom: 20px;
        }
        
        .form-group label {
          display: block;
          margin-bottom: 8px;
          font-size: 13px;
          font-weight: 500;
          color: var(--text-secondary);
        }
        
        .form-input {
          width: 100%;
          padding: 10px 12px;
          border: 1px solid var(--border-color);
          border-radius: 8px;
          font-size: 14px;
          background: var(--bg-secondary);
          transition: border-color 0.2s;
        }
        
        .form-input:focus {
          outline: none;
          border-color: var(--accent-blue);
        }
        
        .modal-footer {
          display: flex;
          justify-content: flex-end;
          gap: 12px;
          padding-top: 20px;
          margin-top: 20px;
          border-top: 1px solid var(--border-color);
        }
        
        .btn-primary {
          padding: 8px 20px;
          background: var(--accent-blue);
          color: white;
          border: none;
          border-radius: 8px;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          transition: opacity 0.2s;
        }
        
        .btn-primary:hover {
          opacity: 0.8;
        }
        
        .btn-secondary {
          padding: 8px 20px;
          background: var(--bg-primary);
          color: var(--text-primary);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
        }
        
        .btn-secondary:hover {
          border-color: var(--text-primary);
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
          width: 8px;
        }
        
        ::-webkit-scrollbar-track {
          background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
          background: var(--border-color);
          border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
          background: var(--text-secondary);
        }
        
        /* TV Frame Styles */
        .tv-frame {
          aspect-ratio: 16 / 9;
          width: 100%;
          max-width: 100vw;
          max-height: 100vh;
          height: 100vh;
          position: relative;
          background: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.9) 100%);
          border: 8px solid #2a2a2a;
          border-radius: 20px;
          box-shadow: 0 0 0 4px #1a1a1a, inset 0 0 0 2px #444, 0 20px 40px rgba(0, 0, 0, 0.5);
          overflow: hidden;
          margin: 0 auto;
        }
        
        .tv-screen {
          width: 100%;
          height: 100%;
          background: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.95) 100%);
          position: relative;
          overflow: hidden;
        }
        
        .tv-static {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.05) 0%, transparent 50%),
                      radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.05) 0%, transparent 50%),
                      radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.05) 0%, transparent 50%);
          pointer-events: none;
          opacity: 0.2;
        }
        
        .tv-power {
          position: absolute;
          top: 20px;
          left: 20px;
          width: 20px;
          height: 20px;
          background: #ff4444;
          border-radius: 50%;
          box-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
          animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
        
        .tv-indicator {
          position: absolute;
          top: 20px;
          right: 20px;
          background: rgba(0, 0, 0, 0.8);
          border: 2px solid #444;
          border-radius: 8px;
          padding: 8px 12px;
          color: #60a5fa;
          font-family: 'Courier New', monospace;
          font-size: 12px;
          font-weight: 700;
          z-index: 10;
        }
        
        .tv-controls {
          position: absolute;
          bottom: 15px;
          left: 50%;
          transform: translateX(-50%);
          display: flex;
          gap: 15px;
          z-index: 10;
          padding: 0 20px;
        }
        
        .channel-dial {
          position: relative;
          width: 45px;
          height: 45px;
          background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 50%, #0a0a0a 100%);
          border: 2px solid #444;
          border-radius: 6px;
          box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5), 0 4px 8px rgba(0, 0, 0, 0.3);
          cursor: pointer;
          transition: all 0.2s ease;
          position: relative;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .channel-dial:hover {
          transform: translateY(-2px);
          box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5), 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        
        .channel-dial.active {
          background: linear-gradient(135deg, #3a3a3a 0%, #2a2a2a 50%, #1a1a1a 100%);
          border-color: #60a5fa;
          box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5), 0 0 15px rgba(96, 165, 250, 0.4);
        }
        
        .channel-number {
          font-size: 14px;
          font-weight: 700;
          color: #60a5fa;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
          font-family: 'Courier New', monospace;
        }
        
        .channel-label {
          position: absolute;
          bottom: -18px;
          left: 50%;
          transform: translateX(-50%);
          font-size: 7px;
          font-weight: 600;
          color: #888;
          text-align: center;
          white-space: nowrap;
          font-family: 'Courier New', monospace;
        }
        
        .glass-card {
          background: linear-gradient(135deg, 
            rgba(15, 23, 42, 0.8) 0%, 
            rgba(30, 41, 59, 0.8) 50%,
            rgba(15, 23, 42, 0.9) 100%);
          border: 1px solid rgba(96, 165, 250, 0.3);
          backdrop-filter: blur(20px) saturate(180%);
          box-shadow: 
            0 8px 32px rgba(0, 0, 0, 0.4),
            inset 0 1px 0 rgba(96, 165, 250, 0.1),
            0 0 40px rgba(96, 165, 250, 0.1);
          position: relative;
          overflow: hidden;
        }
        
        .glass-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(135deg, 
            rgba(96, 165, 250, 0.1) 0%,
            transparent 50%,
            rgba(236, 72, 153, 0.1) 100%);
          pointer-events: none;
          opacity: 0.5;
        }
        
        .glass-card:hover {
          border-color: rgba(96, 165, 250, 0.5);
          box-shadow: 
            0 12px 48px rgba(0, 0, 0, 0.5),
            inset 0 1px 0 rgba(96, 165, 250, 0.2),
            0 0 60px rgba(96, 165, 250, 0.2);
        }
        
        .glass-event-table {
          background: linear-gradient(135deg, 
            rgba(15, 23, 42, 0.85) 0%, 
            rgba(30, 41, 59, 0.85) 100%);
          border: 1px solid rgba(96, 165, 250, 0.2);
          backdrop-filter: blur(16px) saturate(180%);
        }
        
        .neon-scroll::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }
        
        .neon-scroll::-webkit-scrollbar-track {
          background: rgba(15, 23, 42, 0.5);
          border-radius: 10px;
        }
        
        .neon-scroll::-webkit-scrollbar-thumb {
          background: linear-gradient(180deg, 
            rgba(96, 165, 250, 0.8) 0%,
            rgba(236, 72, 153, 0.8) 100%);
          border-radius: 10px;
          border: 2px solid rgba(15, 23, 42, 0.5);
          box-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
        }
        
        .neon-scroll::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(180deg, 
            rgba(96, 165, 250, 1) 0%,
            rgba(236, 72, 153, 1) 100%);
          box-shadow: 0 0 20px rgba(96, 165, 250, 0.8);
        }
        
        /* Chart container neon glow effect */
        .glass-card .card-body {
          position: relative;
          z-index: 1;
        }
        
        .glass-card canvas {
          background: rgba(0, 0, 0, 0.3);
          border-radius: 8px;
          padding: 8px;
        }
        
        /* TV frame specific adjustments */
        .tv-screen .stat {
          background: rgba(15, 23, 42, 0.6);
          border: 1px solid rgba(96, 165, 250, 0.2);
          backdrop-filter: blur(10px);
        }
        
        .tv-screen .stat:hover {
          border-color: rgba(96, 165, 250, 0.5);
          box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
        }
        
        @media (max-width: 768px) {
          .tv-frame {
            width: 95vw;
            height: calc(95vw * 9 / 16);
            max-height: 100vh;
          }
        }
        
        @media (min-width: 1920px) {
          .tv-frame {
            width: 80vw;
            height: calc(80vw * 9 / 16);
            max-height: 100vh;
          }
        }
      </style>
    <link rel="stylesheet" href="/static/css/theme.css" />
    {% block head %}{% endblock %}
  </head>
  <body class="min-h-screen bg-base-200">
    {% block content %}{% endblock %}
    {% block scripts %}{% endblock %}
  </body>
</html>
