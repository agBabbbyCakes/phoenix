{% extends 'base.html' %}

{% block content %}
<div class="flex justify-center items-center min-h-screen p-4">
    <div class="tv-frame">
        <!-- TV Screen -->
        <div class="tv-screen">
            <!-- TV Static Overlay -->
            <div class="tv-static"></div>
            
            <!-- Power Indicator -->
            <div class="tv-power"></div>
            
            <!-- Channel Indicator -->
            <div class="tv-indicator">
                CH <span id="current-channel">1</span>
            </div>
            
            <!-- Main Content -->
            <div class="h-full w-full p-6 flex flex-col">
                <div hx-ext="sse" sse-connect="/stream">
                    <div id="metrics-panel" sse-swap="metrics_update"
                        hx-swap="innerHTML" class="h-full">
                        {{ initial_metrics_html | safe }}
                    </div>
                </div>
            </div>
            
            <!-- TV Channel Controls -->
            <div class="tv-controls">
                <div class="channel-dial active" id="channel-1" data-channel="1" data-view="latency">
                    <div class="channel-knob"></div>
                    <div class="channel-number">1</div>
                    <div class="channel-label">LAT</div>
                </div>
                <div class="channel-dial" id="channel-2" data-channel="2" data-view="throughput">
                    <div class="channel-knob"></div>
                    <div class="channel-number">2</div>
                    <div class="channel-label">THR</div>
                </div>
                <div class="channel-dial" id="channel-3" data-channel="3" data-view="profit">
                    <div class="channel-knob"></div>
                    <div class="channel-number">3</div>
                    <div class="channel-label">PRF</div>
                </div>
                <div class="channel-dial" id="channel-4" data-channel="4" data-view="heatmap">
                    <div class="channel-knob"></div>
                    <div class="channel-number">4</div>
                    <div class="channel-label">HMP</div>
                </div>
                <div class="channel-dial" id="channel-5" data-channel="5" data-view="sensors">
                    <div class="channel-knob"></div>
                    <div class="channel-number">5</div>
                    <div class="channel-label">SNS</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // expose sample mode flag for JS to toggle badge
  document.body.dataset.sampleMode = "{{ 'true' if sample_mode else 'false' }}";
  if (document.body.dataset.sampleMode === 'true') {
    var el = document.getElementById('sample-mode-ind');
    if (el) el.classList.remove('hidden');
  }
</script>
<script src="/static/js/main.js"></script>
{% endblock %}