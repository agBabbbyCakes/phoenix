<!-- LEFT SIDEBAR (Fixed) - Unified Global Sidebar -->
<aside class="hidden md:flex w-[260px] border-r border-gray-800 bg-gray-900/95 backdrop-blur-xl flex-col fixed left-0 top-0 bottom-16 z-20 overflow-y-auto"
       style="box-shadow: 2px 0 20px rgba(0, 0, 0, 0.5); scrollbar-width: thin; scrollbar-color: rgba(6, 182, 212, 0.3) transparent;">
  
  <!-- Logo & Title removed per request; start directly with Navigation -->

  <!-- Navigation Section -->
  <div class="p-4">
    <div class="text-xs uppercase text-gray-500 mb-3 tracking-wider">Navigation</div>
    <nav class="space-y-1">
      <a href="/" 
         class="sidebar-nav-link {% if request.url.path == '/' %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Dashboard
      </a>
      <a href="/explorer" 
         class="sidebar-nav-link {% if '/explorer' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Bot Explorer
      </a>
      <a href="/bots" 
         class="sidebar-nav-link {% if '/bots' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Bots
      </a>
      <a href="/logs" 
         class="sidebar-nav-link {% if '/logs' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Logs
      </a>
      <a href="/report" 
         class="sidebar-nav-link {% if '/report' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Reports
      </a>
      <a href="/settings" 
         class="sidebar-nav-link {% if '/settings' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Settings
      </a>
    </nav>
  </div>

  <!-- Tools Section -->
  <div class="p-4 border-t border-gray-800">
    <div class="text-xs uppercase text-gray-500 mb-3 tracking-wider">Tools</div>
    <nav class="space-y-1">
      <button @click="showCommandPalette = !showCommandPalette" 
              class="sidebar-nav-link w-full text-left">
        Command Palette
      </button>
      <a href="/chart-annotations" 
         class="sidebar-nav-link w-full text-left {% if '/chart-annotations' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Chart Annotations
      </a>
      <a href="/logic-builder" 
         class="sidebar-nav-link w-full text-left {% if '/logic-builder' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
        Logic Builder
      </a>
      <button @click="showAddBotModal = true" 
              class="sidebar-nav-link w-full text-left">
        Add Bot
      </button>
      <button @click="exportData()" 
              class="sidebar-nav-link w-full text-left">
        Export Data
      </button>
      <button @click="toggleTheme()" 
              class="sidebar-nav-link w-full text-left">
        Theme
      </button>
      
      <!-- Misc Submenu -->
      <div class="mt-2">
        <button @click="showMiscMenu = !showMiscMenu" 
                class="sidebar-nav-link w-full text-left flex items-center justify-between">
          <span>Misc</span>
          <span class="text-xs" x-text="showMiscMenu ? '▼' : '▶'"></span>
        </button>
        <div x-show="showMiscMenu" 
             x-transition
             class="ml-4 mt-1 space-y-1"
             style="display: none;">
          <a href="/pointcloud" 
             class="sidebar-nav-link w-full text-left text-xs {% if '/pointcloud' in request.url.path %}active border-l-2 border-emerald-500 pl-2{% endif %}">
            3D View
          </a>
        </div>
      </div>
    </nav>
  </div>

  <!-- Quick Stats -->
  <div class="p-4 border-t border-gray-800 space-y-2">
    <div class="text-xs uppercase text-gray-500 mb-2 tracking-wider">Quick Stats</div>
    <div class="grid grid-cols-3 gap-2">
      <div class="text-center">
        <div class="text-xs text-gray-400">Latency</div>
        <div class="text-xs font-semibold text-cyan-400" 
             x-text="(kpis && kpis.avg_latency_ms) ? kpis.avg_latency_ms + 'ms' : '0ms'"></div>
      </div>
      <div class="text-center">
        <div class="text-xs text-gray-400">Success</div>
        <div class="text-xs font-semibold text-green-400" 
             x-text="(kpis && kpis.success_rate_pct) ? kpis.success_rate_pct + '%' : '0%'"></div>
      </div>
      <div class="text-center">
        <div class="text-xs text-gray-400">Throughput</div>
        <div class="text-xs font-semibold text-yellow-400" 
             x-text="(kpis && kpis.throughput_1m) ? kpis.throughput_1m : '0'"></div>
      </div>
    </div>
  </div>
  
  <!-- Health Status -->
  <div class="p-4 border-t border-gray-800">
    <div class="text-xs uppercase text-gray-500 mb-2 tracking-wider">Health</div>
    <div class="flex gap-2 flex-wrap">
      <div class="px-2 py-1 rounded text-xs bg-emerald-500/20 text-emerald-400 border border-emerald-500/30"
           x-text="(healthSummary && healthSummary.ok) ? healthSummary.ok : '0'">0</div>
      <div class="px-2 py-1 rounded text-xs bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"
           x-text="(healthSummary && healthSummary.slow) ? healthSummary.slow : '0'">0</div>
      <div class="px-2 py-1 rounded text-xs bg-red-500/20 text-red-400 border border-red-500/30"
           x-text="(healthSummary && healthSummary.error) ? healthSummary.error : '0'">0</div>
    </div>
  </div>
  
  <!-- Sidebar Footer -->
  <div class="mt-auto p-4 border-t border-gray-800 text-xs text-gray-500">
    <div class="flex items-center justify-between">
      <span>Silverback v{{ version if version else '0.1.0' }}</span>
      <span x-text="lastUpdated || '--'">--</span>
    </div>
  </div>
</aside>
